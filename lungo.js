/* lungo v2.1.0 - 2013/4/12
   http://lungo.tapquo.com
   Copyright (c) 2013 Tapquo S.L. - Licensed GPLv3, Commercial */
var Quo = require('quojs');
(function(){var e;window.Lungo=e={};e.VERSION="2.1.0325";e.DEVICE=null;e.Config||(e.Config={});e.Element||(e.Element={});e.Data||(e.Data={});e.Sugar||(e.Sugar={});e.View||(e.View={});e.Boot||(e.Boot={});e.Device||(e.Device={});e.ready||(e.ready=Quo().ready)}).call(this);(function(){Lungo.Attributes={count:{selector:"*",html:'<span class="tag theme count">{{value}}</span>'},pull:{selector:"*",html:'<div data-control="pull" data-icon="{{value}}" data-loading>\n  <strong></strong>\n</div>'},progress:{selector:"*",html:'<div class="progress">\n  <span class="bar"><span class="value" style="width:{{value}};"></span></span>\n</div>'},label:{selector:"*",html:"<abbr>{{value}}</abbr>"},icon:{selector:"*",html:'<span class="icon {{value}}"></span>'},image:{selector:"*",html:'<img src="{{value}}" class="icon" />'},title:{selector:"header",html:'<span class="title centered">{{value}}</span>'},"control-checkbox":{selector:"*",html:'<input type="checkbox" value="None" id="{{value}}" />\n<label for="{{value}}"></label>'},loading:{selector:"*",html:'<div class="loading {{value}}">\n  <span class="top"></span>\n  <span class="right"></span>\n  <span class="bottom"></span>\n  <span class="left"></span>\n</div>'},back:{selector:"header",html:'<nav class="left"><a href="#" data-view-section="back"><span class="icon {{value}}"></span></a></nav>'}}}).call(this);(function(){Lungo.Cache=function(e){var t,n,i,r,o;o={};r=function(i,r){if(t(i)){return o[i]=e.Core.mix(n(i),r)}else{return o[i]=r}};n=function(e,t){if(arguments.length===1){return o[e]}else{if(o[arguments[0]]){return o[arguments[0]][arguments[1]]}else{return void 0}}};i=function(e,t){if(arguments.length===1){return delete o[e]}else{return delete o[arguments[0]][arguments[1]]}};t=function(e){if(o[e]){return true}else{return false}};return{set:r,get:n,remove:i,exists:t}}(Lungo)}).call(this);(function(){Lungo.Constants={ELEMENT:{SECTION:"section",ARTICLE:"article",ASIDE:"aside",MENU:"menu",BODY:"body",DIV:"div",LIST:"<ul></ul>",LI:"li"},QUERY:{ARTICLE_ROUTER:"[data-view-article]",SECTION_ROUTER:"[data-view-section]",ARTICLE_ROUTER_TOUCH:"header [data-view-article], footer [data-view-article], nav[data-control] [data-view-article]",SECTION_ROUTER_TOUCH:"header [data-view-section], footer [data-view-section], nav[data-control] [data-view-section]",ARTICLE_ROUTER_TAP:"article [data-view-article]",SECTION_ROUTER_TAP:"article [data-view-section]",ASIDE_ROUTER:"[data-view-aside]",MENU_ROUTER:"[data-view-menu]",LIST_IN_ELEMENT:"article.list",ELEMENT_SCROLLABLE:"article.scroll",HREF_ASIDE:"section[data-aside].drag",HREF_ROUTER:"a[href][data-router]",MENU_HREF:"[data-control=menu] a[href]",CONTROL_CHECKBOX:"[data-control-checkbox]",NAVIGATION_ITEM:'a[href][data-router="article"]',ARTICLE_REFERENCE:"[data-article]",TITLE:"header .title, footer .title",ACTIVE_LIST_ITEM:"li a.active, li.active"},CLASS:{ACTIVE:"active",ASIDE:"aside",SHOW:"show",HIDE:"hide",HIDING:"hiding",RIGHT:"right",LEFT:"left",HORIZONTAL:"horizontal",SMALL:"small"},TRIGGER:{LOAD:"load",UNLOAD:"unload"},TRANSITION:{DURATION:400,ORIGIN:"transition-origin",ATTR:"transition"},ATTRIBUTE:{ID:"id",HREF:"href",TITLE:"title",ARTICLE:"article",CLASS:"class",WIDTH:"width",HEIGHT:"height",PIXEL:"px",PERCENT:"%",ROUTER:"router",FIRST:"first",LAST:"last",EMPTY:"",CHILDREN:"children",TRANSITION:"transition"},BINDING:{START:"{{",END:"}}",KEY:"value",SELECTOR:"{{value}}"},DEVICE:{PHONE:"phone",TABLET:"tablet",TV:"tv"},ERROR:{DATABASE:"ERROR: Connecting to Data.Sql.",DATABASE_TRANSACTION:"ERROR: Data.Sql >> ",ROUTER:"ERROR: The target does not exists >>",LOADING_RESOURCE:"ERROR: Loading resource: "}}}).call(this);(function(){Lungo.Core=function(e,t){var n,i,r,o,a,s,l,u,c,f,d,E;n=Array.prototype;u=function(t,n){if(!e.Core.isMobile()){return console[t===1?"log":t===2?"warn":"error"](n)}};o=function(){var e,t;e=d(arguments);t=e.shift();if(E(t)==="function"){return t.apply(null,e)}};i=function(e,t){return function(){return t.apply(e,d(arguments))}};c=function(){var e,t,n,i,r;n=n||{};e=0;i=arguments.length;while(e<i){t=arguments[e];for(r in t){if(l(t,r)){n[r]=t[r]}}e++}return n};l=function(e,n){return t.isOwnProperty(e,n)};E=function(e){return t.toType(e)};d=function(e){return n.slice.call(e,0)};s=function(){return t.isMobile()};r=function(){return t.environment()};f=function(e,t,n){var i;i=n==="desc"?-1:1;return e.sort(function(e,n){if(e[t]<n[t]){return-i}else{if(e[t]>n[t]){return i}else{return 0}}})};a=function(e,t,n){var i,r,o,a;a=null;r=0;o=e.length;while(r<o){i=e[r];if(i[t]===n){a=i;break}r++}return a};return{log:u,execute:o,bind:i,mix:c,isOwnProperty:l,toType:E,toArray:d,isMobile:s,environment:r,orderByProperty:f,findByProperty:a}}(Lungo,Quo)}).call(this);(function(){Lungo.dom=function(e){return $$(e)}}).call(this);(function(){Lungo.Events=function(e){var t,n;t=" ";n=function(n){var i,r,o,a,s;s=[];for(r in n){a=r.indexOf(t);if(a>0){o=r.substring(0,a);i=r.substring(a+1);s.push(e.dom(document.body).delegate(i,o,n[r]))}else{s.push(void 0)}}return s};return{init:n}}(Lungo)}).call(this);(function(){Lungo.Fallback=function(e){var t;t=function(){var t,n;t=e.Core.environment();n=t.isMobile&&t.os.name==="Android"&&t.os.version<"3"?"absolute":"fixed";return e.dom(document.body).data("position",n)};return{fixPositionInAndroid:t}}(Lungo)}).call(this);(function(){Lungo.init=function(e){Lungo.Config=e;if(e&&e.resources){Lungo.Resource.load(e.resources)}Lungo.Boot.Device.init();Lungo.Boot.Events.init();Lungo.Boot.Data.init();return Lungo.Boot.Layout.init()}}).call(this);(function(){Lungo.Notification=function(e){var t,n,i,r,o,a,s,l,u,c,f,d,E,h,T,v,g,m,C,p,I,R,L,A;I=[];v=null;A=null;i=1;t=e.Constants.ATTRIBUTE;n=e.Constants.BINDING;s=e.Constants.TRANSITION;o={BODY:"body",NOTIFICATION:".notification",MODAL:".notification .window",MODAL_HREF:".notification .window a",WINDOW_CLOSABLE:".notification [data-action=close], .notification > .error, .notification > .success",CONFIRM_BUTTONS:".notification .confirm a.button, .notification .push"};a={MODAL:"modal",VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"};r='<div class="notification"><div class="window"></div></div>';E=function(t,i,r,o){var a,s;s=void 0;if(t!=null){s=C(i,null,t)}else{a=e.Attributes.loading.html;s=a.replace(n.START+n.KEY+n.END,"icon white")}R(s,"growl");return g(r,o)};c=function(){A.removeClass("show");return setTimeout(function(){return v.removeClass("show").removeClass("html").removeClass("confirm").removeClass("notify").removeClass("growl")},s.DURATION/2)};l=function(e){var t;I=e;t=C(e.title,e.description,e.icon);t+=T(e.accept,"accept");t+=T(e.cancel,"cancel");return R(t,"confirm")};h=function(e,t,n,i,r){return p(e,t,n,"success",i,r)};u=function(e,t,n,i,r){return p(e,t,n,"error",i,r)};f=function(e,t,n,i,r){if(t){e+='<a href="#" class="button large anchor" data-action="close">'+t+"</a>"}R(e,"html "+n);return g(i,r)};d=function(e,t,n,i){R(C(e,null,t),"push "+n,false);return g(5,i)};m=function(){e.dom(o.BODY).append(r);v=e.dom(o.NOTIFICATION);A=v.children(".window");return L()};R=function(e,t,n){if(n==null){n=true}if(n){v.removeClass("push")}else{v.addClass("push")}if(!A.hasClass("show")){v.addClass("show")}else{A.removeClass(a.SHOW)}return setTimeout(function(){A.html(e);return A.attr("class","window "+t+" show")},s.DURATION/2)};g=function(e,t){var n=this;if(e!=null&&e>0){return setTimeout(function(){if(t){return t.call(void 0,t)}else{return c()}},e*1e3)}};p=function(e,t,n,i,r,o){R(C(e,t,n),i);return g(r,o)};C=function(e,t,n){t=!t?"&nbsp;":t;e=!e?"&nbsp;":e;return'<span class="icon '+n+'"></span><strong class="text bold">'+e+"</strong><small>"+t+"</small>"};T=function(e,t){return'<a href="#" data-callback="'+t+'" class="button anchor large text thin">'+e.label+"</a>"};L=function(){e.dom(o.CONFIRM_BUTTONS).tap(function(t){var n,i;n=e.dom(this);if(I[n.data("callback")]!=null){i=I[n.data("callback")].callback;if(i){i.call(i)}}return c()});return e.dom(o.WINDOW_CLOSABLE).tap(c)};m();return{show:E,hide:c,error:u,success:h,confirm:l,html:f,push:d}}(Lungo)}).call(this);(function(){Lungo.Resource=function(e,t){var n,i,r,o,a,s;n=e.Constants.ELEMENT;i=e.Constants.ERROR;r=function(t,n){var i,r,a;if(e.Core.toType(t)==="array"){i=0;r=t.length;a=[];while(i<r){o(t[i]);a.push(i++)}return a}else{return o(t,n)}};o=function(t,n){var i;try{return s(a(t),n)}catch(r){i=r;return e.Core.log(3,i.message)}};a=function(e){return t.ajax({url:e,async:false,dataType:"html",error:function(){return console.error(i.LOADING_RESOURCE+e)}})};s=function(t,i){if(e.Core.toType(t)==="string"){i=i?i:n.BODY;return e.dom(i).append(t)}};return{load:r}}(Lungo,Quo)}).call(this);(function(){(function(e,t){var n,i,r,o,a,s,l,u,c,f,d,E;a=e.document;s=a.documentElement;i="scroll-enabled";n="ontouchmove"in a;f="WebkitOverflowScrolling"in s.style||!n&&e.screen.width>1200||function(){var t,n,i,r;t=e.navigator.userAgent;n=t.match(/AppleWebKit\/([0-9]+)/);r=n&&n[1];i=n&&r>=534;return t.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&i||t.match(RegExp(" Version\\/([0-9]+)"))&&RegExp.$1>=0&&e.blackberry&&i||t.indexOf(/PlayBook/)>-1&&RegExp.$1>=0&&i||t.match(/Fennec\/([0-9]+)/)&&RegExp.$1>=4||t.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&i||t.match(/NokiaBrowser\/([0-9\.]+)/)&&parseFloat(RegExp.$1)===7.3&&n&&r>=533}();o=function(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t};u=false;d=void 0;E=function(t,n){var i,r,o,a,s,l,u;o=0;l=t.scrollLeft;u=t.scrollTop;s={top:"+0",left:"+0",duration:100,easing:e.overthrow.easing};i=void 0;r=void 0;if(n){for(a in s){if(n[a]!==void 0){s[a]=n[a]}}}if(typeof s.left==="string"){s.left=parseFloat(s.left);i=s.left+l}else{i=s.left;s.left=s.left-l}if(typeof s.top==="string"){s.top=parseFloat(s.top);r=s.top+u}else{r=s.top;s.top=s.top-u}d=setInterval(function(){if(o++<s.duration){t.scrollLeft=s.easing(o,l,s.left,s.duration);return t.scrollTop=s.easing(o,u,s.top,s.duration)}else{if(i!==t.scrollLeft){t.scrollLeft=i}if(r!==t.scrollTop){t.scrollTop=r}return c()}},1);return{top:r,left:i,duration:s.duration,easing:s.easing}};r=function(e,t){return!t&&e.className&&e.className.indexOf("scroll")>-1&&e||r(e.parentNode)};c=function(){return clearInterval(d)};l=function(){var t,l,d,h,T,v,g,m,C,p,I,R;if(u){return}u=true;if(f||n){s.className+=" "+i}e.overthrow.forget=function(){s.className=s.className.replace(i,"");if(a.removeEventListener){a.removeEventListener("touchstart",R,false)}e.overthrow.easing=o;return u=false};if(f||!n){return}l=void 0;m=[];v=[];T=void 0;g=void 0;p=function(){m=[];return T=null};C=function(){v=[];return g=null};d=function(){var e,t,n;n=(m[0]-m[m.length-1])*8;t=(v[0]-v[v.length-1])*8;e=Math.max(Math.abs(t),Math.abs(n))/8;n=(n>0?"+":"")+n;t=(t>0?"+":"")+t;if(!isNaN(e)&&e>0&&(Math.abs(t)>80||Math.abs(n)>80)){return E(l,{left:t,top:n,duration:e})}};h=void 0;I=function(e){var t,n,i;h=l.querySelectorAll("textarea, input");t=0;n=h.length;i=[];while(t<n){h[t].style.pointerEvents=e;i.push(t++)}return i};t=function(e,t){var n,i;if(a.createEvent){n=(!t||t===void 0)&&l.parentNode||l.touchchild||l;i=void 0;if(n!==l){i=a.createEvent("HTMLEvents");i.initEvent("touchend",true,true);l.dispatchEvent(i);n.touchchild=l;l=n;return n.dispatchEvent(e)}}};R=function(e){var n,i,o,a,u,f,E,h,R,L,A;c();p();C();l=r(e.target);if(!l||l===s||e.touches.length>1){return}I("none");L=e;f=l.scrollTop;u=l.scrollLeft;i=l.offsetHeight;A=l.offsetWidth;R=e.touches[0].pageY;h=e.touches[0].pageX;a=l.scrollHeight;E=l.scrollWidth;o=function(e){var n,r,o,s;s=f+R-e.touches[0].pageY;o=u+h-e.touches[0].pageX;n=s>=(m.length?m[0]:0);r=o>=(v.length?v[0]:0);if(s>0&&s<a-i||o>0&&o<E-A){e.preventDefault()}else{t(L)}if(T&&n!==T){p()}if(g&&r!==g){C()}T=n;g=r;l.scrollTop=s;l.scrollLeft=o;m.unshift(s);v.unshift(o);if(m.length>3){m.pop()}if(v.length>3){return v.pop()}};n=function(e){d();I("auto");setTimeout(function(){return I("none")},450);l.removeEventListener("touchmove",o,false);return l.removeEventListener("touchend",n,false)};l.addEventListener("touchmove",o,false);return l.addEventListener("touchend",n,false)};return a.addEventListener("touchstart",R,false)};e.overthrow={set:l,forget:function(){},easing:o,toss:E,intercept:c,closest:r,support:f?"native":n&&"polyfilled"||"none"};return l()})(this)}).call(this);(function(){Lungo.Service=function(e,t){var n,i,r,o,a,s,l,u,c,f,d;i="lungojs_service_cache";n={MINUTE:"minute",HOUR:"hour",DAY:"day"};o=function(e,n,i,r){return t.get(e,n,i,r)};s=function(e,n,i,r){return t.post(e,n,i,r)};a=function(e,n,i){return t.json(e,n,i)};r=function(n,i,r,o,a){var s,l;s=n+t.serializeParameters(i);if(d(s,r)){l=e.Data.Storage.persistent(s);if(l){return o.call(o,l)}}else{return t.get(n,i,function(e){f(s,e);return o.call(o,e)},a)}};d=function(t,n){var r,o,a;r=false;a=e.Data.Storage.persistent(i);if(a){o=u(a[t]);r=c(o,n)}return r};u=function(e){var t,n;t=(new Date).getTime();n=new Date(e).getTime();return t-n};c=function(e,t){var n,i;i=t.split(" ");n=l(i[1],e);if(n<i[0]){return true}else{return false}};l=function(e,t){var i;i=t/1e3/60;if(e.indexOf(n.HOUR)>=0){i=i/60}else{if(e.indexOf(n.DAY)>=0){i=i/60/24}}return i};f=function(t,n){var r;r=e.Data.Storage.persistent(i)||{};r[t]=new Date;e.Data.Storage.persistent(i,r);return e.Data.Storage.persistent(t,n)};return{get:o,post:s,json:a,cache:r,Settings:t.ajaxSettings}}(Lungo,Quo)}).call(this);(function(){Lungo.Router=function(e){var t,n,i,r,o,a,s,l,u,c,f,d;t=e.Constants;n="#";l=[];a=function(i){var r,o,a;r=e.Element.Cache.section;if(u(r,i)){o=t.ELEMENT.SECTION+n+i;a=r?r.siblings(o):e.dom(o);if(a.length>0){if(e.DEVICE===t.DEVICE.PHONE&&r!=null){e.Section.defineTransition(a,r);r.removeClass(t.CLASS.SHOW).addClass(t.CLASS.HIDE)}e.Section.show(r,a);e.Router.step(i);if(Lungo.Config.history){d()}return f()}}};i=function(n,i,r){var o;if(u(e.Element.Cache.article,i)){e.Router.section(n);o=e.Element.Cache.section.find("#"+i);if(o.length>0){e.Element.Cache.article.removeClass(t.CLASS.ACTIVE).trigger(t.TRIGGER.UNLOAD);e.Element.Cache.article=o.addClass(t.CLASS.ACTIVE).trigger(t.TRIGGER.LOAD);if((r!=null?r.data(t.ATTRIBUTE.TITLE):void 0)!=null){e.Element.Cache.section.find(t.QUERY.TITLE).text(r.data(t.ATTRIBUTE.TITLE))}if(Lungo.Config.history){d()}return f()}}};r=function(){var i,r,a;c();i=e.Element.Cache.section;r=t.ELEMENT.SECTION+n+o();a=i.siblings(r);if(e.DEVICE===t.DEVICE.PHONE){e.Aside.hide();e.Section.assignTransition(a,a.data(t.TRANSITION.ORIGIN));i.removeClass(t.CLASS.SHOW).addClass(t.CLASS.HIDING);setTimeout(function(){return i.removeClass(t.CLASS.HIDING)},t.TRANSITION.DURATION);if(a.hasClass("aside")){e.Aside.toggle()}}e.Section.show(i,a);if(Lungo.Config.history!=null){d()}return f()};s=function(e){if(e!==o()){return l.push(e)}};o=function(){return l[l.length-1]};u=function(e,n){return(e!=null?e.attr(t.ATTRIBUTE.ID):void 0)!==n};d=function(){var t,n,i;t="";for(n=0,i=l.length;n<i;n++){a=l[n];t+=""+a+"/"}t+=e.Element.Cache.article.attr("id");return setTimeout(function(){return window.location.hash=t},0)};f=function(){var n,i;n=e.Element.Cache.article.attr(t.ATTRIBUTE.ID);e.dom(t.QUERY.ARTICLE_ROUTER).removeClass(t.CLASS.ACTIVE).filter("[data-view-article="+n+"]").addClass(t.CLASS.ACTIVE);i=e.Element.Cache.section.find(t.QUERY.ARTICLE_REFERENCE).addClass(t.CLASS.HIDE);return i.filter("[data-article*='"+n+"']").removeClass(t.CLASS.HIDE)};c=function(){return l.length-=1};return{section:a,article:i,back:r,history:o,step:s}}(Lungo)}).call(this);(function(){Lungo.Aside=function(e){var t,n,i,r,o,a,s;t=e.Constants;n=function(n){var i,r;i=n.data("aside");r=e.Element.Cache.aside;if(r&&i!==(r!=null?r.attr(t.ATTRIBUTE.ID):void 0)){r.removeClass(t.CLASS.SHOW).removeClass(t.CLASS.ACTIVE);e.Element.Cache.aside=null}if(i){e.Element.Cache.aside=e.dom(t.ELEMENT.ASIDE+"#"+i);e.Element.Cache.aside.addClass(t.CLASS.ACTIVE);if(e.DEVICE!==t.DEVICE.PHONE){e.Aside.show(i)}}return e.Element.Cache.aside};a=function(){var n;if(e.Element.Cache.aside){n=e.Element.Cache.aside.hasClass(t.CLASS.SHOW);if(n){return e.Aside.hide()}else{return e.Aside.show()}}};o=function(){if(e.Element.Cache.aside!=null){setTimeout(function(){return e.Element.Cache.aside.addClass(t.CLASS.SHOW)},t.TRANSITION.DURATION);if(e.DEVICE===t.DEVICE.PHONE){e.Element.Cache.aside.addClass(t.CLASS.SHOW);return e.Element.Cache.section.addClass(s()).addClass(t.CLASS.ASIDE)}}};r=function(){if(e.Element.Cache.aside!=null&&e.DEVICE===t.DEVICE.PHONE){e.Element.Cache.section.removeClass(t.CLASS.ASIDE);return setTimeout(function(){return e.Element.Cache.aside.removeClass(t.CLASS.SHOW)},t.TRANSITION.DURATION)}};i=function(){var n;n=parseInt(document.body.getBoundingClientRect().width/3,10);n=128;return e.dom(t.QUERY.HREF_ASIDE).each(function(){var i,a,s,l;l=false;a=e.dom(this);s=a.closest("section");i=e.dom("aside#"+a.data("aside"));s.swiping(function(e){var n,r;if(!s.hasClass("aside")){n=e.currentTouch.x-e.iniTouch.x;r=Math.abs(e.currentTouch.y-e.iniTouch.y);l=l?true:n>3*r&&n<50;if(l){n=n>256?256:n<0?0:n;i.addClass(t.CLASS.SHOW);s.vendor("transform","translateX("+n+"px)");return s.vendor("transition-duration","0s")}else{return s.attr("style","")}}});return s.swipe(function(e){var t,a;t=e.currentTouch.x-e.iniTouch.x;a=Math.abs(e.currentTouch.y-e.iniTouch.y);s.attr("style","");if(t>n&&l){o(i)}else{r(i)}return l=false})})};s=function(){var n;if((n=e.Element.Cache.aside)!=null?n.hasClass(t.CLASS.RIGHT):void 0){return""+t.CLASS.RIGHT}else{return"  "}};return{active:n,toggle:a,show:o,hide:r,draggable:i}}(Lungo)}).call(this);(function(){Lungo.Section=function(e){var t,n,i,r,o,a,s;t=e.Constants;r=function(n,i){var r;if(e.DEVICE===t.DEVICE.PHONE){a(i)}else{s(n,i)}e.Element.Cache.section=i;r=i.find(""+t.ELEMENT.ARTICLE+"."+t.CLASS.ACTIVE);if(r.length===0){r=i.find(t.ELEMENT.ARTICLE).first().addClass(t.CLASS.ACTIVE)}e.Element.Cache.article=r;e.Element.Cache.aside=e.Aside.active(i);if(i.hasClass("aside")){e.Aside.show()}if(n){n.trigger(t.TRIGGER.UNLOAD)}return i.trigger(t.TRIGGER.LOAD)};i=function(e,i){var r;r=e.data(t.ATTRIBUTE.TRANSITION);if(r){o(i);return n(i,r)}};n=function(e,n){return e.data(t.ATTRIBUTE.TRANSITION,n)};a=function(e){return e.removeClass(t.CLASS.HIDE).addClass(t.CLASS.SHOW)};s=function(e,n){var i;if(e){i=e.data(t.ATTRIBUTE.CHILDREN)}if(e&&(!i||i.indexOf(n.attr(t.ATTRIBUTE.ID))===-1)){e.addClass(t.CLASS.HIDE);setTimeout(function(){return e.removeClass(t.CLASS.SHOW).removeClass(t.CLASS.HIDE)},t.TRANSITION.DURATION)}return setTimeout(function(){return n.addClass(t.CLASS.SHOW)},t.TRANSITION.DURATION)};o=function(e){return e.data(t.TRANSITION.ORIGIN,e.data(t.TRANSITION.ATTR))};return{show:r,defineTransition:i,assignTransition:n}}(Lungo)}).call(this);(function(){Lungo.Article=function(e){var t,n;t=e.Constants;n=function(n,i,r,o,a){var s,l;if(o==null){o=""}if(a==null){a=null}if(s=e.dom(""+t.ELEMENT.ARTICLE+"#"+n)){l="";if(i!=null){l='<div class="empty">\n  <span class="icon '+i+'"></span>\n  <strong>'+r+"</strong>\n  <small>"+o+"</small>\n</div>"}s.html(l);if(a){return s.children().append("<button class='anchor'><abbr>"+a+"</abbr></button>")}}};return{clean:n}}(Lungo)}).call(this);(function(){Lungo.Boot.Data=function(e){var t,n,i,r,o;t=e.Constants.BINDING;n=function(t){var n;n=e.dom(t||document.body);if(n.length>0){return r(n)}};r=function(t){var n,i;i=[];for(n in e.Attributes){if(e.Core.isOwnProperty(e.Attributes,n)){i.push(o(t,n))}else{i.push(void 0)}}return i};o=function(t,n){var r,o;r=e.Attributes[n];o=r.selector+"[data-"+n+"]";return t.find(o).each(function(t,o){var a;a=e.dom(o);return i(a,a.data(n),r.html)})};i=function(e,t,n){return e.prepend(n.replace(/\{\{value\}\}/g,t))};return{init:n}}(Lungo)}).call(this);(function(){Lungo.Boot.Device=function(e){var t,n;t=e.Constants.DEVICE;n=function(){var n,i;i=e.Core.environment();e.DEVICE=i.screen.width<768?t.PHONE:t.TABLET;n=e.dom(document.body);n.data("device",e.DEVICE);if(i.os){n.data("os",i.os.name.toLowerCase())}if(e.DEVICE===e.Constants.DEVICE.PHONE){return e.Aside.draggable()}};return{init:n}}(Lungo)}).call(this);(function(){Lungo.Boot.Events=function(e){var t,n,i,r,o,a,s,l,u,c,f,d,E;n=e.Constants;t=e.Constants.ATTRIBUTE;i=e.Constants.CLASS;r=e.Constants.ELEMENT;o=e.Constants.QUERY;a=function(){e.dom(n.QUERY.SECTION_ROUTER_TOUCH).touch(E);e.dom(n.QUERY.ARTICLE_ROUTER_TOUCH).touch(u);e.dom(n.QUERY.SECTION_ROUTER_TAP).tap(E);e.dom(n.QUERY.ARTICLE_ROUTER_TAP).tap(u);e.dom(n.QUERY.ASIDE_ROUTER).touch(c);e.dom(n.QUERY.MENU_ROUTER).touch(d);e.dom(o.MENU_HREF).touch(l);return e.dom(o.CONTROL_CHECKBOX).on("change",s)};E=function(t){var i,r;t.preventDefault();i=e.dom(this);if(i.data("async")){return f(i,n.ELEMENT.SECTION)}else{r=i.data("view-section");if(r!=="back"){return e.Router.section(r)}else{return e.Router.back()}}};u=function(t){var i;t.preventDefault();i=e.dom(this);if(i.data("async")){return f(i,n.ELEMENT.ARTICLE)}else{e.Router.article(e.Router.history(),i.data("view-article"),i);return e.Aside.hide()}};f=function(t,i){var r,o,a,s,l,u,c;s=t.data("async");r=t.data("view-"+i);e.Notification.show();if(i===n.ELEMENT.ARTICLE){a=e.Element.Cache.section.attr(n.ATTRIBUTE.ID);e.Resource.load(s,n.ELEMENT.SECTION+"#"+a)}else{e.Resource.load(s)}e.Boot.Data.init("#"+r);c=e.dom("[data-async='"+s+"']");for(l=0,u=c.length;l<u;l++){o=c[l];o.removeAttribute("data-async")}if(i===n.ELEMENT.ARTICLE){e.Router.article(a,r);e.Aside.hide()}else{e.Router.section(r)}return e.Notification.hide()};c=function(t){t.preventDefault();return e.Aside.toggle()};d=function(t){var n;t.preventDefault();n=e.dom(this).data("view-menu");return e.dom("[data-control=menu]#"+n).toggleClass(i.SHOW)};l=function(t){var r,o;t.preventDefault();r=e.dom(this);o=r.parent("[data-control=menu]").removeClass(i.SHOW).attr(n.ATTRIBUTE.ID);return e.dom("[data-view-menu="+o+"] > .icon").attr("class","icon "+r.data("icon"))};s=function(t){var n,i,r;t.preventDefault();i=e.dom(this);r=i.find("input");n=r[0].checked;r.val(n.toString());i.removeClass("checked");if(n){return i.addClass("checked")}};return{init:a}}(Lungo)}).call(this);(function(){Lungo.Boot.Layout=function(e){var t,n,i,r,o,a,s,l;t=e.Constants;n="#";i=function(){var n;e.Fallback.fixPositionInAndroid();if(Lungo.Config.history&&((n=window.location.hash)!=null?n.length:void 0)>=2){s()}else{a()}o(t.QUERY.LIST_IN_ELEMENT,r);return o(t.QUERY.ELEMENT_SCROLLABLE,l)};s=function(){var t,i,r,o,a,s;i=window.location.hash.replace(n,"").split("/");o=i[i.length-2];t=i[i.length-1];if(i.length>2){i.length-=2;for(a=0,s=i.length;a<s;a++){r=i[a];e.Router.step(r)}}e.Router.section(o);return e.Router.article(o,t)};a=function(){var n;n=e.dom(t.ELEMENT.SECTION).first();if(n){return e.Router.section(n.attr(t.ATTRIBUTE.ID))}};o=function(t,n){var i,r,o,a,s;r=e.dom(t);o=0;a=r.length;s=[];while(o<a){i=e.dom(r[o]);e.Core.execute(n,i);s.push(o++)}return s};r=function(e){var n;if(e.children().length===0){n=e.attr(t.ATTRIBUTE.ID);return e.append(t.ELEMENT.LIST)}};l=function(e){return e[0].addEventListener("touchstart",function(e){var t;t=this.scrollTop;if(t<=1){this.scrollTop=1}if(t+this.offsetHeight>=this.scrollHeight){return this.scrollTop=this.scrollHeight-this.offsetHeight-1}},false)};return{init:i}}(Lungo)}).call(this);(function(){Lungo.Element.Cache={section:null,article:null,aside:null,navigation:null}}).call(this);(function(){Lungo.Element.Carousel=function(e,t){var n,i,r,o,a,s,l,u,c,f,d,E;s={index:0,speed:300,callback:t,container:e,element:e.children[0],slide:void 0,slides:[],slides_length:0,width:0,start:{},isScrolling:void 0,deltaX:0};r=function(e){if(s.index){return u(s.index-1,s.speed)}};n=function(e){if(s.index<s.slides_length-1){return u(s.index+1,s.speed)}else{return u(0,s.speed)}};i=function(){return s.index};o=function(){return l()};l=function(){var e,t;s.slides=s.element.children;s.slides_length=s.slides.length;if(s.slides_length<2){return null}s.width="getBoundingClientRect"in s.container?s.container.getBoundingClientRect().width:s.container.offsetWidth;if(!s.width){return null}s.element.style.width=s.slides.length*s.width+"px";t=s.slides.length;while(t--){e=s.slides[t];e.style.width=s.width+"px";e.style.display="table-cell";e.style.verticalAlign="top"}u(s.index,0);return s.container.style.visibility="visible"};u=function(e,t){var n;n=s.element.style;if(t===void 0){t=s.speed}n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=t+"ms";n.MozTransform=n.webkitTransform="translate3d("+-(e*s.width)+"px,0,0)";n.msTransform=n.OTransform="translateX("+-(e*s.width)+"px)";return s.index=e};a=function(){s.element.addEventListener("touchstart",d,false);s.element.addEventListener("touchmove",f,false);s.element.addEventListener("touchend",c,false);s.element.addEventListener("webkitTransitionEnd",E,false);s.element.addEventListener("msTransitionEnd",E,false);s.element.addEventListener("oTransitionEnd",E,false);s.element.addEventListener("transitionend",E,false);return window.addEventListener("resize",l,false)};d=function(e){s.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date)};s.isScrolling=void 0;s.deltaX=0;s.element.style.MozTransitionDuration=s.element.style.webkitTransitionDuration=0;return e.stopPropagation()};f=function(e){var t,n;if(e.touches.length>1||e.scale&&e.scale!==1){return}s.deltaX=e.touches[0].pageX-s.start.pageX;if(typeof s.isScrolling==="undefined"){s.isScrolling=!!(s.isScrolling||Math.abs(s.deltaX)<Math.abs(e.touches[0].pageY-s.start.pageY))}if(!s.isScrolling){e.preventDefault();t=!s.index&&s.deltaX>0||s.index===s.slides_length-1&&s.deltaX<0?Math.abs(s.deltaX)/s.width+1:1;s.deltaX=s.deltaX/t;n=s.deltaX-s.index*s.width;s.element.style.MozTransform=s.element.style.webkitTransform="translate3d("+n+"px,0,0)";return e.stopPropagation()}};c=function(e){var t,n;n=Number(new Date)-s.start.time<250&&Math.abs(s.deltaX)>20||Math.abs(s.deltaX)>s.width/2;t=!s.index&&s.deltaX>0||s.index===s.slides_length-1&&s.deltaX<0;if(!s.isScrolling){u(s.index+(n&&!t?s.deltaX<0?1:-1:0),s.speed)}return e.stopPropagation()};E=function(e){if(s.callback){return s.callback.apply(s.callback,[s.index,s.slides[s.index]])}};l();a();return{prev:r,next:n,position:i,refresh:o}}}).call(this);(function(){Lungo.Element.count=function(e,t){var n,i,r;i=Lungo.dom(e);if(i){i.children(".tag.count").remove();if(t){n=Lungo.Constants.BINDING.SELECTOR;r=Lungo.Attributes.count.html.replace(n,t);return i.append(r)}}}}).call(this);(function(){Lungo.Element.loading=function(e,t){var n,i,r;i=Lungo.dom(e);if(i){r=null;if(t){n=Lungo.Constants.BINDING.SELECTOR;r=Lungo.Attributes.loading.html.replace(n,t)}return i.html(r)}}}).call(this);(function(){Lungo.Element.progress=function(e,t){var n;n=Lungo.dom(e);if(n){t+=Lungo.Constants.ATTRIBUTE.PERCENT;return n.find(".value").style(Lungo.Constants.ATTRIBUTE.WIDTH,t)}}}).call(this);(function(){Lungo.Element.Pull=function(e,t){var n,i,r,o,a,s,l,u,c,f,d,E,h,T,v,g,m,C;c=68;l=80;n=300;a=0;u=false;s=$$(e);o=s.siblings('div[data-control="pull"]');i=void 0;r={onPull:"Pull down to refresh",onRelease:"Release to...",onRefresh:"Loading...",callback:void 0};i=Lungo.Core.mix(r,t);f=function(){T(0,true);setTimeout(function(){u=false;return document.removeEventListener("touchmove",d,false)},n);return a=0};T=function(e,t){var i;i=e>l?l:e;if(t){s.addClass("pull")}s.style("-webkit-transform","translate(0, "+i+"px)");if(t){return setTimeout(function(){return s.removeClass("pull")},n)}};v=function(e){u=true;document.addEventListener("touchmove",d,false);C(i.onRefresh);g(true);T(c,true);if(i.callback){return i.callback.apply(this)}};C=function(e){return o.find("strong").html(e)};g=function(e){if(e){return o.addClass("refresh")}else{return o.removeClass("refresh")}};m=function(e){if(e){return o.addClass("rotate")}else{return o.removeClass("rotate")}};d=function(e){return e.preventDefault()};h=function(e){T(a,false);g(false);if(a>c){C(i.onRelease);return m(true)}else{C(i.onPull);return m(false)}};E=function(e){if(a>c){return v()}else{return f()}};(function(){var e,t;t=false;e={};return s.bind("touchstart",function(n){if(s[0].scrollTop<=1){t=true;return e=$$.isMobile()?n.touches[0].pageY:n.pageY}}).bind("touchmove",function(n){var i;if(!u&&t){i=$$.isMobile()?n.touches[0].pageY:n.pageY;a=i-e;if(a>=0){s.style("overflow-y","hidden");return h()}}}).bind("touchend",function(){var e;if(t){s.style("overflow-y","scroll");E()}e={};return t=false})})();return{hide:f}}}).call(this);
module.exports = Lungo;